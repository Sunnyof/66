System.register("chunks:///_virtual/AudioManager.ts",["cc","./GlobalDefine.ts","./DStorage.ts","./ResourceManager.ts"],(function(s){"use strict";var t,i,e,n,a,u,o,c;return{setters:[function(s){t=s.cclegacy,i=s._decorator,e=s.Component,n=s.AudioSource,a=s.AudioClip},function(s){u=s.Macro},function(s){o=s.default},function(s){c=s.default}],execute:function(){var d,l;t._RF.push({},"4c2bdb6L55I16pEXjo1NjCd","AudioManager",void 0);const{ccclass:h,property:r,menu:p}=i;s("default",h(d=p("runtime/AudioManager")(((l=class s extends e{constructor(...s){super(...s),this.isInited=!1,this.backgroundUrl="",this.audioSource=null,this.musicEnabled=!0,this.soundEnabled=!0}static Instance(){return this._instance}onLoad(){s._instance=this,s.Instance().loadLocalData(),this.init()}init(){this.isInited||(this.isInited=!0,this.audioSource=this.node.addComponent(n),this.audioSource.playOnAwake=!1,this.audioSource.loop=!0,this.playMusicBG())}musicOn(){this.musicEnabled&&(this.audioSource.volume=1)}musicOff(){this.musicEnabled&&(this.stopMusic(),this.audioSource.volume=0)}setMusicEnabled(s){this.musicEnabled=s,o.setItem("isMusicOn",this.musicEnabled?1:0),s?this.playMusicBG():this.stopMusic()}stopMusic(){this.backgroundUrl&&(this.audioSource.stop(),this.backgroundUrl="")}setSoundEnabled(s){this.soundEnabled=s,o.setItem("isEffectOn",this.soundEnabled?1:0)}playEffect(s,t=1){this.soundEnabled&&c.getInstance().loadResAsync(s,a).then((s=>{this.audioSource.playOneShot(s,t)}))}playMusicBG(){this.musicEnabled&&this.backgroundUrl&&this.playMusic(this.backgroundUrl)}playMusic(s,t=u.BUNDLE_RESOURCES){this.musicEnabled&&c.getInstance().loadResAsync(s,a).then((s=>{this.audioSource.stop(),this.audioSource.clip=s,this.audioSource.play()}))}loadLocalData(){this.musicEnabled=Boolean(o.getNum("isMusicOn",1)),this.soundEnabled=Boolean(o.getNum("isEffectOn",1))}saveLocalData(){o.setItem("isMusicOn",this.musicEnabled?1:0),o.setItem("isEffectOn",this.soundEnabled?1:0)}})._instance=null,d=l))||d)||d);t._RF.pop()}}}));

System.register("chunks:///_virtual/CountDown.ts",["cc","./DateUtil.ts"],(function(t){"use strict";var s,i,o,e,h;return{setters:[function(t){s=t.cclegacy,i=t.Label,o=t.Component,e=t._decorator},function(t){h=t.default}],execute:function(){var a;s._RF.push({},"4a14bo2lrxPKZ7Lw/xMvDyh","CountDown",void 0);const{ccclass:n,executeInEditMode:r,requireComponent:c,menu:l}=e;t("default",n(a=r(a=c(i)(a=l("ui/common/Countdown")(a=class extends o{constructor(...t){super(...t),this.callback=void 0,this.thisArg=void 0,this.totalTime=-1,this.bStop=!0,this.format=void 0}start(){this.format=this.format??"hh:mm:ss",this.string=0}run(t,s,i,o){null==t||t<0||(this.bStop=!1,i&&""!=i&&(this.format=i),this.callback=s,this.thisArg=o,this.totalTime=t+this.getSysTimes())}set string(t){let s=this.getComponent(i);s&&this.totalTime>=0&&(s.string=h.formatCountDwon(t,this.format))}update(t){if(this.bStop)return;var s=this.getSysTimes();Math.floor(this.totalTime-s)>=0?this.string=this.totalTime-s:this.stop()}stop(){this.bStop||(this.bStop=!0,this.string=0,this.thisArg&&this.callback?this.callback.apply(this.thisArg):this.callback&&this.callback())}getSysTimes(){return(new Date).getTime()/1e3}})||a)||a)||a)||a);s._RF.pop()}}}));

System.register("chunks:///_virtual/DateUtil.ts",["cc"],(function(t){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"c14acT7m2VHyYCUO0C1+l1A","DateUtil",void 0);t("default",class{static formatDate(t,e){let s=new Date;s.setTime(1e3*e);let r={"M+":s.getMonth()+1,"d+":s.getDate(),"h+":s.getHours(),"m+":s.getMinutes(),"s+":s.getSeconds(),"q+":Math.floor((s.getMonth()+3)/3),S:s.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(s.getFullYear()+"").substr(4-RegExp.$1.length)));for(let e in r)new RegExp("("+e+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?r[e]:("00"+r[e]).substr((""+r[e]).length)));return t}static formatCountDwon(t,e){if("ss"==e)return Math.floor(t%3600%60)+"s";let s={"h+":Math.floor(t/3600),"m+":Math.floor(t%3600/60),"s+":Math.floor(t%3600%60)};for(let t in s)new RegExp("("+t+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?s[t]:("00"+s[t]).substr((""+s[t]).length)));return e}}),e._RF.pop()}}}));

System.register("chunks:///_virtual/DStorage.ts",["cc"],(function(t){"use strict";var e,a;return{setters:[function(t){e=t.sys,a=t.cclegacy}],execute:function(){a._RF.push({},"cd0efYus4ZBtb3XiTd/pIZ1","DStorage",void 0);t("default",class{static set(t,a){e.localStorage.setItem(t,JSON.stringify(a))}static get(t){let a=e.localStorage.getItem(t),l=null;if(a&&"undefined"!=a&&null!=a)try{l=JSON.parse(a)}catch(t){t(t)}return l}static remove(t){e.localStorage.removeItem(t)}static getItem(t,e){let a=localStorage.getItem(t);return null==a?e:a}static getNum(t,e){let a=localStorage.getItem(t);return null==a||""==a?e:Number(a)}static setItem(t,e){Log.d("setitem:key:"+t+",value:"+e),localStorage.setItem(t,String(e))}static removeItem(t){localStorage.removeItem(t)}static getObj(t,e){let a=localStorage.getItem(t);return null==a||""==a?e:JSON.parse(a)}static setObj(t,e){let a=JSON.stringify(e);localStorage.setItem(t,a)}}),a._RF.pop()}}}));

System.register("chunks:///_virtual/EffectsUtil.ts",["cc"],(function(t){"use strict";var e,c,r;return{setters:[function(t){e=t.cclegacy,c=t.v3,r=t._decorator}],execute:function(){var s;e._RF.push({},"e83e9e3+UtOXZGkVTGBNtUY","EffectsUtil",void 0);const{ccclass:a,property:o}=r;t("EffectsUtil",a("EffectsUtil")(s=class{static get2BezierCtrlP(t,e){let r=Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))>>2,s=e.x-t.x,a=e.y-t.y,o=t.x+(s>>2),i=t.y+(a>>2),n=Math.atan2(i,o);n+=Math.PI/180*270;let y=o+Math.cos(n)*r,l=i+Math.sin(n)*r,x=t.x+3*(s>>2),h=t.y+3*(a>>2);n=Math.atan2(h,x),n+=Math.PI/180*90;let f=x+Math.cos(n)*r,u=h+Math.sin(n)*r;return{controlPos0:c(y,l),controlPos1:c(f,u)}}static threeBezier(t,e,r,s,a){let o=e.x*(1-t)*(1-t)*(1-t)+3*r.x*t*(1-t)*(1-t)+3*s.x*t*t*(1-t)+a.x*t*t*t,i=e.y*(1-t)*(1-t)*(1-t)+3*r.y*t*(1-t)*(1-t)+3*s.y*t*t*(1-t)+a.y*t*t*t;return c(o,i,0)}static forthBezier(t,e,r,s,a,o){let i=e.x*(1-t)*(1-t)*(1-t)*(1-t)+4*r.x*t*(1-t)*(1-t)*(1-t)+4*s.x*t*t*(1-t)*(1-t)+4*a.x*t*t*t*(1-t)+o.x*t*t*t*t,n=e.y*(1-t)*(1-t)*(1-t)*(1-t)+4*r.y*t*(1-t)*(1-t)*(1-t)+4*s.y*t*t*(1-t)*(1-t)+4*a.y*t*t*t*(1-t)+o.y*t*t*t*t;return c(i,n,0)}})||s);e._RF.pop()}}}));

System.register("chunks:///_virtual/Eventer.ts",["cc","./Singleton.ts"],(function(e){"use strict";var t,s;return{setters:[function(e){t=e.cclegacy},function(e){s=e.Singleton}],execute:function(){t._RF.push({},"fbd05OK8k5DkKXH/HlSxhI5","Eventer",void 0);class n extends(s()){constructor(){super(),this.eventListeners=null,this.eventListeners=new Map}on(e,t,s){this.eventListeners.has(e)||this.eventListeners.set(e,[]),this.eventListeners.get(e).push({listener:s,handler:t})}emit(e,t=null){if(this.eventListeners.has(e))for(let s=0;s<this.eventListeners.get(e).length;++s){let n=this.eventListeners.get(e)[s];n.handler.call(n.listener,t)}}off(e){e&&this.eventListeners.forEach(((t,s)=>{for(var n=0;n<t.length;n++)t[n].listener==e&&(t.splice(n,1),n--)}))}offName(e,t){if(this.eventListeners.has(e))if(t)for(let s=0;s<this.eventListeners.get(e).length;++s){let n=this.eventListeners.get(e)[s];t&&n.listener==t&&this.eventListeners.get(e).splice(s,1)}else this.eventListeners.delete(e)}offHandler(e,t){if(this.eventListeners.has(e))for(let s=0;s<this.eventListeners.get(e).length;++s){let n=this.eventListeners.get(e)[s];t&&n.listener==t&&this.eventListeners.get(e).splice(s,1)}}offAll(){this.eventListeners.clear()}}e("Eventer",n),t._RF.pop()}}}));

System.register("chunks:///_virtual/Events.ts",["cc"],(function(e){"use strict";var r;return{setters:[function(e){r=e.cclegacy}],execute:function(){r._RF.push({},"2ed66JONQNBnZ/7hqF7w0YX","Events",void 0);e("Events",{AdFinish:"AdFinish",ErrorMsgEvent:"ErrorMsgEvent",ErrorCodeEvent:"ErrorCodeEvent",UIOpenBefore:"UIOpenBefore",UIOpen:"UIOpen",UIClose:"UIClose",HttpError:"HttpError",SliderEvent:"slide"});r._RF.pop()}}}));

System.register("chunks:///_virtual/GameManager.ts",["cc","./Singleton.ts","./UIManager.ts","./UIDefined.ts"],(function(n){"use strict";var e,t,a,s,c;return{setters:[function(n){e=n.cclegacy},function(n){t=n.Singleton},function(n){a=n.UIManager},function(n){s=n.UICF,c=n.UIID}],execute:function(){e._RF.push({},"41f2di4CKZCUKHTjP7WCnLG","GameManager",void 0);class i extends(t()){async init(){a.getInstance().setUIConf(s),a.getInstance().open(c.UILogin)}}n("GameManager",i),e._RF.pop()}}}));

System.register("chunks:///_virtual/GameView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIView.ts","./UIManager.ts","./UIDefined.ts"],(function(t){"use strict";var e,i,s,r,l,o,n,h,a,c,m,u,p,d,b,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){s=t.cclegacy,r=t.Prefab,l=t.Node,o=t.Label,n=t._decorator,h=t.sys,a=t.instantiate,c=t.v3,m=t.tween,u=t.Vec3,p=t.Animation},function(t){d=t.UIView},function(t){b=t.UIManager},function(t){f=t.UIID}],execute:function(){var y,N,g,A,w,I,S,z,v,L,G,M,P,B,U,C,D,T,V,x,F,k,R;s._RF.push({},"d533c5tqphMEa1JuH8vmD7s","GameView",void 0);const{ccclass:_,property:j}=n;t("GameView",(y=_("GameView"),N=j({displayName:"itemArr",type:r}),g=j({displayName:"scrollNodeArr",type:l}),A=j({displayName:"btnStart",type:l}),w=j({displayName:"btnAuto",type:l}),I=j({displayName:"betLb",type:o}),S=j({displayName:"denomLb",type:o}),z=j({displayName:"balanceLb",type:o}),v=j({displayName:"winLb",type:o}),L=j({displayName:"startGray",type:l}),G=j({displayName:"autoGray",type:l}),y((B=e((P=class extends d{constructor(...t){super(...t),i(this,"itemArr",B,this),i(this,"scrollNodeArr",U,this),i(this,"btnStart",C,this),i(this,"btnAuto",D,this),i(this,"betLb",T,this),i(this,"denomLb",V,this),i(this,"balanceLb",x,this),i(this,"winLb",F,this),i(this,"startGray",k,this),i(this,"autoGray",R,this),this.Balance=0,this.win=0,this.denom=1,this.prizeNumb=0,this.canScroll1=!1,this.canScroll2=!1,this.canScroll3=!1,this.canScroll4=!1,this.canScroll5=!1,this.canStart=!0,this.isAuto=!1,this.item1=null,this.item2=null,this.item3=null,this.item4=null,this.item5=null,this.temp1=0,this.temp2=0,this.temp3=0,this.temp4=0,this.temp5=0,this.temp6=0,this.temp7=0,this.temp8=0,this.temp9=0,this.temp10=0,this.winPrizeFunction=null}start(){null!==h.localStorage.getItem("balance")?this.Balance=Number(h.localStorage.getItem("balance")):this.Balance=5e3,this.winPrizeFunction=()=>{this.win++},this.createItem(this.scrollNodeArr[0]),this.createItem(this.scrollNodeArr[1]),this.createItem(this.scrollNodeArr[2]),this.createItem(this.scrollNodeArr[3]),this.createItem(this.scrollNodeArr[4])}createItem(t){let e=-140,i=this.generateRandomArray(0,14,15);for(let s=0;s<15;s++){let r=a(this.itemArr[i[s]]);r.parent=t,r.setPosition(c(0,e,0)),e+=140}}getRandomInteger(t,e){return Math.floor(Math.random()*(e-t+1))+t}generateRandomArray(t,e,i){if(e-t+1<i)throw new Error("范围内的整数数量不足以生成指定长度的不重复数组");const s=[],r=[];for(let i=t;i<=e;i++)r.push(i);for(let t=0;t<i;t++){const t=Math.floor(Math.random()*r.length),e=r.splice(t,1)[0];s.push(e)}return console.log(s),s}scroll(t){let e=t;for(let t=0;t<e.children.length;t++){let i=e.children[t].position.y;i-=20,e.children[t].setPosition(c(e.children[t].position.x,i,0)),i<-280&&e.children[t].setPosition(c(e.children[t].position.x,1800,0))}}bufferMove(t){m().target(t).to(.1,{position:new u(t.position.x,-60,0)}).start(),setTimeout((()=>{m().target(t).to(.1,{position:new u(t.position.x,0,0)}).start()}),100)}nearestItem(t){let e=t,i=[];for(let t=0;t<e.children.length;t++)e.children[t].position.y>0&&i.push(e.children[t]);let s=i[0];for(let t=0;t<i.length;t++)s.position.y>i[t].position.y&&(s=i[t]);return console.log(s.name),s}back(){b.getInstance().closeToUI(f.UIGame),b.getInstance().open(f.UILogin),this.prizeNumb>0&&(this.Balance+=this.prizeNumb,this.prizeNumb=0,this.win=0),h.localStorage.setItem("balance",""+this.Balance)}startbtn(){if(this.unschedule(this.winPrizeFunction),this.prizeNumb>0&&(this.Balance+=this.prizeNumb,this.prizeNumb=0,this.win=0),this.Balance>=this.denom&&this.canStart){this.Balance-=this.denom,this.canStart=!1,0==this.isAuto&&(this.startGray.active=!0),this.scrollNodeArr[0].removeAllChildren(),this.scrollNodeArr[1].removeAllChildren(),this.scrollNodeArr[2].removeAllChildren(),this.scrollNodeArr[3].removeAllChildren(),this.scrollNodeArr[4].removeAllChildren(),this.createItem(this.scrollNodeArr[0]),this.createItem(this.scrollNodeArr[1]),this.createItem(this.scrollNodeArr[2]),this.createItem(this.scrollNodeArr[3]),this.createItem(this.scrollNodeArr[4]),this.canScroll1=!0,this.canScroll2=!0,this.canScroll3=!0,this.canScroll4=!0,this.canScroll5=!0,this.temp1=0,this.temp2=0,this.temp3=0,this.temp4=0,this.temp5=0,this.temp6=0,this.temp7=0,this.temp8=0,this.temp9=0,this.temp10=0;let t=()=>{this.temp6++,1==this.temp6&&(this.item1=this.nearestItem(this.scrollNodeArr[0])),console.log(this.item1.name),0==this.item1.position.y&&(this.canScroll1=!1,this.temp1++,1==this.temp1&&(this.bufferMove(this.scrollNodeArr[0]),setTimeout((()=>{this.unschedule(t)}),100)))},e=()=>{this.temp7++,1==this.temp7&&(this.item2=this.nearestItem(this.scrollNodeArr[1])),console.log(this.item2.name),0==this.item2.position.y&&(this.canScroll2=!1,this.temp2++,1==this.temp2&&(this.bufferMove(this.scrollNodeArr[1]),setTimeout((()=>{this.unschedule(e)}),100)))},i=()=>{this.temp8++,1==this.temp8&&(this.item3=this.nearestItem(this.scrollNodeArr[2])),console.log(this.item3.name),0==this.item3.position.y&&(this.canScroll3=!1,this.temp3++,1==this.temp3&&(this.bufferMove(this.scrollNodeArr[2]),setTimeout((()=>{this.unschedule(i)}),100)))},s=()=>{this.temp9++,1==this.temp9&&(this.item4=this.nearestItem(this.scrollNodeArr[3])),console.log(this.item4.name),0==this.item4.position.y&&(this.canScroll4=!1,this.temp4++,1==this.temp4&&(this.bufferMove(this.scrollNodeArr[3]),setTimeout((()=>{this.unschedule(s)}),100)))},r=()=>{this.temp10++,1==this.temp10&&(this.item5=this.nearestItem(this.scrollNodeArr[4])),console.log(this.item5.name),0==this.item5.position.y&&(this.canScroll5=!1,this.temp5++,1==this.temp5&&(this.bufferMove(this.scrollNodeArr[4]),setTimeout((()=>{this.unschedule(r),this.judgement(),this.canStart=!0,this.startGray.active=!1}),100)))};this.schedule(t,.01,100,1),this.schedule(e,.01,100,1.5),this.schedule(i,.01,100,2),this.schedule(s,.01,100,2.5),this.schedule(r,.01,100,3)}}autobtn(){0==this.autoGray.active&&this.canStart?(this.isAuto=!0,this.autoGray.active=!0,this.startbtn(),this.schedule(this.startbtn,5,1e4,0)):1==this.autoGray.active&&(this.isAuto=!1,this.autoGray.active=!1,this.unschedule(this.startbtn))}judgement(){let t=[],e=[],i=[],s=[[]];for(let t=0;t<3;t++){s[t]=[];for(let e=0;e<5;e++)s[t][e]=null}for(let t=0;t<5;t++)for(let e=0;e<15;e++)140==this.scrollNodeArr[t].children[e].position.y?s[0][t]=this.scrollNodeArr[t].children[e]:0==this.scrollNodeArr[t].children[e].position.y?s[1][t]=this.scrollNodeArr[t].children[e]:-140==this.scrollNodeArr[t].children[e].position.y&&(s[2][t]=this.scrollNodeArr[t].children[e]);console.log(s);let r=s[0][0].name,l=s[1][0].name,o=s[2][0].name;for(let e=0;e<5;e++){let i=0;for(let l=0;l<3;l++)s[l][e].name!=r&&s[l][e].name!=r&&s[l][e].name!=r||(t.push(s[l][e]),i++);if(0==i)break}if(l!==r)for(let t=0;t<5;t++){let i=0;for(let r=0;r<3;r++)s[r][t].name!=l&&s[r][t].name!=l&&s[r][t].name!=l||(e.push(s[r][t]),i++);if(0==i)break}if(o!==l&&o!==r)for(let t=0;t<5;t++){let e=0;for(let r=0;r<3;r++)s[r][t].name!=o&&s[r][t].name!=o&&s[r][t].name!=o||(i.push(s[r][t]),e++);if(0==e)break}if(console.log(t),console.log(e),console.log(i),t.length>=2){for(let e=0;e<t.length;e++)t[e].getComponent(p).play();this.prizeNumb+=this.denom*t.length}if(e.length>=2){for(let t=0;t<e.length;t++)e[t].getComponent(p).play();this.prizeNumb+=this.denom*e.length}if(i.length>=2){for(let t=0;t<i.length;t++)i[t].getComponent(p).play();this.prizeNumb+=this.denom*i.length}this.prizeNumb>0&&this.winPrize(this.prizeNumb)}addDenom(){1==this.denom?this.denom+=9:this.denom+=10}subDenom(){this.denom-=10,this.denom<1&&(this.denom=1)}winPrize(t){this.schedule(this.winPrizeFunction,.01,t-1,0)}update(t){this.balanceLb.string=""+this.Balance,this.denomLb.string=""+this.denom,this.betLb.string=""+this.denom,this.winLb.string=""+this.win,this.canScroll1&&this.scroll(this.scrollNodeArr[0]),this.canScroll2&&this.scroll(this.scrollNodeArr[1]),this.canScroll3&&this.scroll(this.scrollNodeArr[2]),this.canScroll4&&this.scroll(this.scrollNodeArr[3]),this.canScroll5&&this.scroll(this.scrollNodeArr[4])}}).prototype,"itemArr",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),U=e(P.prototype,"scrollNodeArr",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),C=e(P.prototype,"btnStart",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(P.prototype,"btnAuto",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=e(P.prototype,"betLb",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=e(P.prototype,"denomLb",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(P.prototype,"balanceLb",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(P.prototype,"winLb",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(P.prototype,"startGray",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(P.prototype,"autoGray",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=P))||M));s._RF.pop()}}}));

System.register("chunks:///_virtual/GlobalDefine.ts",["cc"],(function(e){"use strict";var c;return{setters:[function(e){c=e.cclegacy}],execute:function(){let t;var r;e("Macro",void 0),c._RF.push({},"fae14E5gjRN96f+MIWcJ6ht","GlobalDefine",void 0),(r=t||(t=e("Macro",{}))).BUNDLE_RESOURCES="resources",r.BUNDLE_REMOTE="__Remote__Caches__",r.UNKNOWN="UNKNOWN",c._RF.pop()}}}));

System.register("chunks:///_virtual/HotUpdate.ts",["cc","./Singleton.ts"],(function(t){"use strict";var e,s,a,i,r,n;return{setters:[function(t){e=t.sys,s=t.native,a=t.game,i=t.assetManager,r=t.cclegacy},function(t){n=t.Singleton}],execute:function(){r._RF.push({},"f1492iDuvtJUZOYQXVCl5gr","HotUpdate",void 0);const l={packageUrl:"packageUrl",remoteManifestUrl:"remoteManifestUrl",remoteVersionUrl:"remoteVersionUrl",whiteListConfigUrl:"whiteListConfigUrl"};class o extends(n()){constructor(...t){super(...t),this.am=null,this._updating=!1,this._canRetry=!1,this.params=null,this._localVersion="1.0.0",this.storagePath="",this.timeout=null,this.platformId=0,this.cdnUrl="",this.manifestJsonData=null,this.whitelistMatchRule={whiteList:"deviceid",uidList:"uid",uidRegular:"uid",deviceidList:"deviceid",deviceidRegular:"deviceid",uninionidList:"unionid",unionidRegular:"unionid"}}getLocalVersion(){return this._localVersion}get updating(){return this._updating}init(t,a){if(!e.isNative)return;this.platformId=t,this.cdnUrl=a;let i=t?t+"/":"";this.storagePath=(s.fileUtils?s.fileUtils.getWritablePath():"/")+i+"remotePath",this.am=new s.AssetsManager("",this.storagePath,this.versionCompareHanle);this.am.setVerifyCallback(((t,e)=>{let s=e.compressed,a=e.md5,i=e.path;e.size;return s?(Log.d("检查压缩 : "+i),!0):(Log.d("检查压缩 : "+i+" ("+a+")"),!0)}))}checkUpdate(t){if(this.params=t,!e.isNative||!this.params||!this.params.asset||this._updating||!this.am)return void this.params.onUpdate(!1);if(this.am.getState()===s.AssetsManager.State.UNINITED){this.loadManifest();let t=this.am.getLocalManifest();t&&t.getVersion&&(this._localVersion=t.getVersion())}if(!this.am.getLocalManifest()||!this.am.getLocalManifest().isLoaded())return void this.params.onUpdate(!1);let a=this;this.checkManifest(String(this.platformId),this.cdnUrl);this.am.setEventCallback((function(t){a.timeout&&(clearTimeout(a.timeout),a.timeout=null),Log.d("checkUpdate Code: "+t.getEventCode());let e=t.getEventCode();e==s.EventAssetsManager.NEW_VERSION_FOUND?(a.params.onUpdate(!0),a.am.setEventCallback(null),a._updating=!1,a.hotUpdateStart()):e==s.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST||e!=s.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST&&e!=s.EventAssetsManager.ERROR_PARSE_MANIFEST&&e!=s.EventAssetsManager.ALREADY_UP_TO_DATE||(a.params.onUpdate(!1),a.am.setEventCallback(null),a._updating=!1)})),this.am.checkUpdate(),this._updating=!0}hotUpdateStart(){if(this.am&&!this._updating){if(this.am.setEventCallback(this.updateCallback.bind(this)),this.am.getState()===s.AssetsManager.State.UNINITED){this.loadManifest();let t=this.am.getLocalManifest();t&&t.getVersion&&(this._localVersion=t.getVersion())}this.am.update(),this._updating=!0}}versionCompareHanle(t,e){Log.d(`当前版本 :  ${t} , 远程版本 : ${e}`);let s=t.split("."),a=e.split(".");for(let t=0;t<s.length&&t<a.length;++t){if(parseInt(s[t])!==parseInt(a[t]))return-1}return a.length>s.length?-1:0}updateCallback(t){let i=!1,r=!1,n=null,l=null;switch(Log.d("2Code: "+t.getEventCode()),t.getEventCode()){case s.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:Log.d("本地没有manifest文件，更新失败"),r=!0;break;case s.EventAssetsManager.UPDATE_PROGRESSION:l=Math.floor(100*t.getPercentByFile())/100;let e=Math.ceil(t.getDownloadedBytes()/1024),a=Math.ceil(t.getTotalBytes()/1024);a>0&&(n=e+" / "+a+"kb");break;case s.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:case s.EventAssetsManager.ERROR_PARSE_MANIFEST:Log.d("下载manifest文件失败!"),r=!0;break;case s.EventAssetsManager.ALREADY_UP_TO_DATE:return Log.d("已经更新到最新版本!"),this.params.onProgress&&this.params.onProgress.call(this,!0,1,n),void(this._updating=!1);case s.EventAssetsManager.UPDATE_FINISHED:Log.d("更新成功!"),i=!0;break;case s.EventAssetsManager.UPDATE_FAILED:Log.d(`更新失败!${t.getMessage()}`);break;case s.EventAssetsManager.ERROR_UPDATING:Log.d(`资源更新失败!${t.getAssetId()},${t.getMessage()}`);break;case s.EventAssetsManager.ERROR_DECOMPRESS:Log.d(`资源解压失败!${t.getMessage()}`)}if(this.params.onProgress&&this.params.onProgress.call(this,!1,l,n),r&&(this.am.setEventCallback(null),this._updating=!1),i){this.params.onProgress&&this.params.onProgress.call(this,!0,l,n),this.am.setEventCallback(null);let t=s.fileUtils.getSearchPaths(),i=this.am.getLocalManifest();i&&Array.prototype.unshift.apply(t,i.getSearchPaths()),e.localStorage.setItem("HotUpdateSearchPaths",JSON.stringify(t)),s.fileUtils.setSearchPaths(t),e.isNative&&a.restart()}}retry(){!this._updating&&this._canRetry&&this.am&&(this._canRetry=!1,this.am.downloadFailedAssets())}onFail(t){this._updating=!1,this.params&&this.params.onFail&&this.params.onFail.call(this,t)}loadManifest(){if(!this.params.asset)return;let t=this.params.asset.nativeUrl;this.am.loadLocalManifest(t)}matchIdByList(t,e,s){t=t.toString();for(let a of e)if(s){if(t.match(a.toString()))return!0}else if(t==a.toString())return!0}isWhitelistGrayMatch(t,e,s){let a=!1,i=s??e.rule??["uidList"];0==i.length&&(i=["uidList"]);for(let s of i){let i=!0;for(let a of s.split(",")){let s=this.whitelistMatchRule[a]??"",r=a.match("(.*)Regular"),n=t[s],l=e[a]??{};n&&this.matchIdByList(n,l,r)||(i=!1)}if(i){a=!0;break}}return a}checkWhite(t,e){let s=!1;if(!t)return e(s),s;let a=null,r=this.getStorageManifestData();if(r&&(a=r.whiteListConfigUrl),!a)return e(s),s;Log.d(`====checkWhite url===${a}=====`);let n=setTimeout((()=>(e(s),s)),3e3);i.loadRemote(a,((a,r)=>{if(n&&clearTimeout(n),a||!r||!r.json)return Log.w("load whiteList fail!"+a),e(s),s;let l=r.json;1==l.openWhitelist||"true"==l.openWhitelist?this.isWhitelistGrayMatch(t,l,["whiteList"])&&(s=!0):1!=l.openGray&&"true"!=l.openGray||this.isWhitelistGrayMatch(t,l)&&(s=!0),i.releaseAsset(r),e(s,l)}))}editWhiteManifest(t,e){let s=this.getStorageManifestData();s.remoteManifestUrl=t.remoteManifestUrl,s.remoteVersionUrl=t.remoteVersionUrl;let a=JSON.stringify(s),i=this.am.getLocalManifest();i.parseJSONString(a,i.getManifestRoot()),Log.d(`===editWhiteManifest2===${t.remoteManifestUrl}==${i.getManifestFileUrl()}==`),e&&e()}getStorageManifestData(){if(!this.params)return;if(this.manifestJsonData)return this.manifestJsonData;let t=this.storagePath+"project.manifest",e="";e=s.fileUtils.isFileExist(t)?t:this.params.asset.nativeUrl;let a=s.fileUtils.getStringFromFile(e),i=JSON.parse(a);return this.manifestJsonData=i,i}checkManifest(t,s){if(!e.isNative||null==t||Number(t)<=0)return;if(!s||""===s)return;let a=o.getInstance(),i=a.getStorageManifestData();if(!i)return;let r=i[l.packageUrl];if(r&&-1==String(r).indexOf(s)){for(let e in l){let a=i[e];if(!a)return void Log.w(`No manifest path=${a} found! `);{let r=this.findPos(a,"/",2);a=a.replace(a.substring(0,r),s);let n=this.findPos(a,"/",3),l=this.findPos(a,"/",4);if(!(l>n))return void Log.w(`manifest replace url error=${e}! `);a=a.replace(a.substring(n+1,l),t),i[e]=a,Log.d(`=manifest replace success!=${e}=${a}==`)}}i.version="1.0.0";let e=JSON.stringify(i),r=a.am.getLocalManifest();r.parseJSONString(e,r.getManifestRoot())}}findPos(t,e,s){for(var a=t.indexOf(e),i=0;i<s;i++)a=t.indexOf(e,a+1);return a}}t("default",o),r._RF.pop()}}}));

System.register("chunks:///_virtual/HttpBase.ts",["cc"],(function(e){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){let s,r;e({HttpMethod:void 0,HttpResponseType:void 0}),t._RF.push({},"9da5e1GQdlDtLzNTpv5+mBi","HttpBase",void 0),function(e){e.GET="GET",e.POST="POST"}(s||(s=e("HttpMethod",{}))),function(e){e.TEXT="text",e.ARRAY_BUFFER="arraybuffer",e.DOCUMENT="document",e.JSON="json"}(r||(r=e("HttpResponseType",{})));e("HttpBase",class{constructor(){this._xhr=void 0,this._responseType=void 0,this._listener=void 0,this._withCredentials=void 0,this._url="",this._method=void 0,this._timeout=5e3,this.headerObj=void 0}open(e,t,r,i=s.GET){this._url=e,this._method=i,this._listener=t||function(){},this._xhr&&(this._xhr.abort(),this._xhr=null),this._xhr=this.getXHR();var h=this;this._xhr.timeout=this._timeout,this._xhr.onreadystatechange=function(){h._listener(this.response,h._xhr)},this._xhr.ontimeout=()=>{r()},this._xhr.onerror=()=>{r()},this._xhr.open(this._method,this._url,!0)}send(e){if(null!=this._responseType&&(this._xhr.responseType=this._responseType),null!=this._withCredentials&&(this._xhr.withCredentials=this._withCredentials),this.headerObj)for(let e in this.headerObj)this._xhr.setRequestHeader(e,this.headerObj[e]);this._xhr.send(e)}abort(){this._xhr&&this._xhr.abort()}resend(){this._xhr&&(this._xhr.abort(),this._xhr.open(this._method,this._url,!0),this._xhr.send())}getAllResponseHeaders(){if(!this._xhr)return null;let e=this._xhr.getAllResponseHeaders();return e||""}setRequestHeader(e,t){this.headerObj||(this.headerObj={}),this.headerObj[e]=t}getResponseHeader(e){if(!this._xhr)return null;let t=this._xhr.getResponseHeader(e);return t||""}getXHR(){var e=e||{};if(window){if(window.XMLHttpRequest)return new window.XMLHttpRequest}else if(e)return e.log("use cc.load"),e.loader.getXMLHttpRequest()}get withCredentials(){return this._withCredentials}set withCredentials(e){this._withCredentials=e}get response(){if(!this._xhr)return null;if(null!=this._xhr.response)return this._xhr.response;if("text"==this._responseType)return this._xhr.responseText;if(this._responseType==r.ARRAY_BUFFER){return window.convertResponseBodyToText(this._xhr.responseBody)}return this._responseType==r.DOCUMENT?this._xhr.responseXML:null}get responseType(){return this._responseType}set responseType(e){this._responseType=e}set timeout(e){this._timeout=e,this._xhr&&(this._xhr.timeout=e)}get status(){return this._xhr?this._xhr.status:null}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/HttpReq.ts",["cc","./HttpBase.ts"],(function(t){"use strict";var e,s,n;return{setters:[function(t){e=t.cclegacy},function(t){s=t.HttpMethod,n=t.HttpBase}],execute:function(){e._RF.push({},"492280wYuFBh7TISPg0bzrA","HttpReq",void 0);class o{static get(t,e,i={}){let r=new n,a=i.header||{"Content-Type":"application/json"},p=i.retry||o.HTTP_MAX_TRYTIMES;r.timeout=o.HTTP_USR_TIMEOUT;for(const t in a)if(a.hasOwnProperty(t)){const e=a[t];r.setRequestHeader(t,e)}let d=0,u=function(){d+=1,d>p?(Log.d("raise http timeout! %s",t),e&&e(!1,"fail")):(Log.d("raise timeout! url is %s||idx is %d",t,d),r.resend())};r.open(t,(function(t,s){4==s.readyState&&(s.status>=200&&s.status<300?(Log.d("respdata ----\x3e",r.response),e&&e(r.response)):u())}),u,s.GET),Log.d("http get ----\x3e",t),r.send()}static post(t,e,i,r={}){let a=new n,p=r.header||{"Content-Type":"application/json"},d=r.retry||o.HTTP_MAX_TRYTIMES;a.timeout=o.HTTP_USR_TIMEOUT;for(const t in p)if(p.hasOwnProperty(t)){const e=p[t];a.setRequestHeader(t,e)}let u=0,T=function(){u+=1,u>d?(Log.d("raise http timeout! %s",t),e&&e(!1,"fail")):(Log.d("raise timeout! url is %s||idx is %d",t,u),a.resend())};a.open(t,(function(t,s){4==s.readyState&&(s.status>=200&&s.status<300?(Log.d("respdata ----\x3e",a.response),e&&e(a.response)):T())}),T,s.POST),a.send(JSON.stringify(i)),Log.d("senddata ----\x3e",i),Log.d("http post ----\x3e",t)}}t("HttpReq",o),o.HTTP_MAX_TRYTIMES=3,o.HTTP_USR_TIMEOUT=5e3,e._RF.pop()}}}));

System.register("chunks:///_virtual/LoadingScene.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIManager.ts","./GameManager.ts"],(function(e){"use strict";var t,n,r,a,i,o,c,s,u,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){r=e.cclegacy,a=e.Prefab,i=e._decorator,o=e.Component,c=e.instantiate,s=e.director},function(e){u=e.UIManager},function(e){d=e.GameManager}],execute:function(){var l,p,g,y,L;r._RF.push({},"950874wiKpOF4AQM+Rop1gG","LoadingScene",void 0);const{ccclass:f,property:h}=i;e("LoadingScene",(l=f("LoadingScene"),p=h(a),l((L=t((y=class extends o{constructor(...e){super(...e),n(this,"uiLayer",L,this)}onLoad(){this.addUILayer(),d.getInstance().init()}addUILayer(){if(!u.getInstance().uiLayer){let e=c(this.uiLayer);s.addPersistRootNode(e)}}}).prototype,"uiLayer",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=y))||g));r._RF.pop()}}}));

System.register("chunks:///_virtual/Logger.ts",["cc","./Singleton.ts"],(function(e){"use strict";var n,t,o;return{setters:[function(e){n=e.cclegacy,t=e.sys},function(e){o=e.Singleton}],execute:function(){function r(){return(new Date).toLocaleString()}n._RF.push({},"46b676EOd5FEYldf9zG5uVp","Logger",void 0),window.Log=console,window.Log.e=(...e)=>{console.error(`${r()}：`,...e)},window.Log.d=(...e)=>{console.log(`${r()}：`,...e)},window.Log.w=(...e)=>{console.warn(`${r()}：`,...e)},window.Log.dump=()=>{};class i extends(o()){constructor(...e){super(...e),this.logger=console,this._isDebug=!1}init(e){this._isDebug=e,this._isDebug||t.isBrowser?(this.logger.d=Log.d,this.logger.dump=this.dump.bind(this)):(this.logger.d=()=>{},this.logger.dump=()=>{}),this.logger.e=Log.e,this.logger.w=Log.w}dump(){let e=this._dump(arguments[0],arguments[1],arguments[2],arguments[4]);this.logger.d(e)}_dump(e,n="unkown",t=3,o=0){if(t<0)return"...";o+=3;let r=this;n=void 0===n?"":n;let i="",s="";switch(typeof e){case"boolean":s=n.length>0?n+" = ":"",i+=s+("Boolean(1) "+(e?"TRUE":"FALSE"));break;case"number":s=n.length>0?n+" = ":"",i+=s+e;break;case"string":s=n.length>0?n+" = ":"",i+=s+function(e){return'"'+e+'"'}(e);break;case"object":s=n.length>0?n+" => ":"",i+=s+function(e){if(null===e)return"NULL(0)";let n="",i=0,s="";if(e instanceof Array){i=e.length;for(let e=0;e<o;++e)s+=" ";n="Array("+i+") "+(s.length,"[");for(let g=0;g<i;++g)n+="\n"+(0===s.length?"":""+s)+"   ["+g+"] = "+r._dump(e[g],"",t-1,o);return n+="\n"+(0===s.length?"":""+s)+"]",n}if(e instanceof Object){for(let e=0;e<o;++e)s+=" ";n="{";for(let i in e)n+="\n"+(0===s.length?"":""+s)+"   ["+i+"] = "+r._dump(e[i],"",t-1,o);return n+="\n"+(0===s.length?"":""+s)+"}",n}return"Unknown Object Type!"}(e);break;case"function":s=n.length>0?n+" = ":"",i+=s+"Function";break;case"undefined":s=n.length>0?n+" = ":"",i+=s+"Undefined";break;default:i+=s+" is unknown type!"}return i}}e("LoggerImpl",i),n._RF.pop()}}}));

System.register("chunks:///_virtual/LoginView.ts",["cc","./UIView.ts","./UIManager.ts","./UIDefined.ts"],(function(e){"use strict";var t,n,c,i,s;return{setters:[function(e){t=e.cclegacy,n=e._decorator},function(e){c=e.UIView},function(e){i=e.UIManager},function(e){s=e.UIID}],execute:function(){var o;t._RF.push({},"e4302TEOgRBWJeB51Vgt2Nj","LoginView",void 0);const{ccclass:a,property:r}=n;e("LoginView",a("LoginView")(o=class extends c{start(){}play(){i.getInstance().closeToUI(s.UILogin),i.getInstance().open(s.UIGame)}})||o);t._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./DStorage.ts","./Eventer.ts","./Events.ts","./GlobalDefine.ts","./Logger.ts","./Singleton.ts","./AudioManager.ts","./ResourceManager.ts","./HttpBase.ts","./HttpReq.ts","./UIAdapter.ts","./UIBaseDefined.ts","./UILayer.ts","./UIManager.ts","./UIMask.ts","./UIUtils.ts","./UIView.ts","./HotUpdate.ts","./CountDown.ts","./DateUtil.ts","./EffectsUtil.ts","./RrrorReport.ts","./LoadingScene.ts","./GameManager.ts","./GameView.ts","./LoginView.ts","./UIDefined.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/ResourceManager.ts",["cc","./Singleton.ts"],(function(e){"use strict";var s,t,n,r,a,i;return{setters:[function(e){s=e.resources,t=e.Prefab,n=e.SpriteAtlas,r=e.assetManager,a=e.cclegacy},function(e){i=e.Singleton}],execute:function(){a._RF.push({},"05ddb6dKlZE1Y2353/f1FYT","ResourceManager",void 0);class l extends(i()){constructor(...e){super(...e),this.atlas={},this.bundles={},this.prefabs={}}async loadResAsync(e,t,n,r){let a=e.substring(e.lastIndexOf("/")+1),i=this.getAssetsCache(t);return i[a]?i[a]:new Promise(((l,o)=>{let u=function(e,s,t){r&&r(e,s,t)},c=function(s,t){if(s)return console.warn(`Load Asset ${e} Error ${s}`),void o(`Load Asset ${e} Error ${s}`);i[a]=t,l(t)};n?this.getBundleAsync(n).then((s=>{s.load(e,t,u,c)})):s.load(e,t,u,c)}))}getAssetsCache(e){let s={};return e instanceof t?s=this.prefabs:e instanceof n&&(s=this.atlas),s}async getBundleAsync(e="resources"){let s=r.getBundle(e);return s?Promise.resolve(s):(this.bundles[e]||(this.bundles[e]=new Promise(((s,t)=>{r.loadBundle(e,null,((n,r)=>{n?t():s(r),delete this.bundles[e]}))}))),this.bundles[e])}async getAtlasSpriteFrameAsync(e,s){return new Promise(((t,r)=>{this.loadResAsync(e,n).then((e=>{t(e.getSpriteFrame(s))}))}))}}e("default",l),a._RF.pop()}}}));

System.register("chunks:///_virtual/RrrorReport.ts",["cc","./Singleton.ts"],(function(r){"use strict";var t,e,o;return{setters:[function(r){t=r.cclegacy,e=r.sys},function(r){o=r.Singleton}],execute:function(){t._RF.push({},"842bdd8GTBGK7ntzIJi1F3H","RrrorReport",void 0);class n extends(o()){constructor(){super(),this.catchError()}catchError(){let r=this;e.isBrowser?window.onerror=function(t,e,o,n,s){s&&r.errorReport(`${s.message}${s.stack}`)}:e.isNative&&(window.__errorHandler=function(...t){t&&r.errorReport(`${t.toString()}`)})}errorReport(r){}}r("errorReport",n),t._RF.pop()}}}));

System.register("chunks:///_virtual/Singleton.ts",["cc"],(function(n){"use strict";var t;return{setters:[function(n){t=n.cclegacy}],execute:function(){n("Singleton",(function(){class n{constructor(){}static getInstance(){return null==n._instance&&(n._instance=new this),n._instance}}return n._instance=null,n})),t._RF.push({},"ac88eTn+T9Cv5izrh2wbNCs","Singleton",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/UIAdapter.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var i,t,n,o,s,r,c,a,l,h,u;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.initializerDefineProperty},function(e){n=e.cclegacy,o=e._decorator,s=e.Component,r=e.UITransform,c=e.screen,a=e.v3,l=e.View,h=e.view,u=e.ResolutionPolicy}],execute:function(){var d,w,g,p,z;n._RF.push({},"bc6023Qu/5DeqBFGlQq5X2X","UIAdapter",void 0);const{ccclass:m,property:S,menu:f}=o;e("default",(d=f("ui/common/UIAdapter"),w=S({displayName:"是否是背景适配"}),m(g=d((z=i((p=class extends s{constructor(...e){super(...e),t(this,"isBackground",z,this)}onLoad(){let e=this.node.getComponent(r),i=Math.min(c.windowSize.width/e.width,c.windowSize.height/e.height),t=e.width*i,n=e.height*i;if(this.isBackground){let e=Math.max(c.windowSize.width/t,c.windowSize.height/n);this.node.scale=a(e,e,1)}else e.width*=c.windowSize.width/t,e.height*=c.windowSize.height/n}static initResolution(){let e=l.instance.getVisibleSize().width,i=l.instance.getVisibleSize().height,t=l.instance.getDesignResolutionSize().width,n=l.instance.getDesignResolutionSize().height;(e>i?i/e:e/i)>(t>n?n/t:t/n)?h.setResolutionPolicy(u.FIXED_WIDTH):h.setResolutionPolicy(u.FIXED_HEIGHT)}}).prototype,"isBackground",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),g=p))||g)||g));n._RF.pop()}}}));

System.register("chunks:///_virtual/UIBaseDefined.ts",["cc"],(function(e){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"280a3T+tZFFM44RemPm54a9","UIBaseDefined",void 0);e("UICF_BASE",{});t._RF.pop()}}}));

System.register("chunks:///_virtual/UIDefined.ts",["cc"],(function(e){"use strict";var i;return{setters:[function(e){i=e.cclegacy}],execute:function(){let n;e("UIID",void 0),i._RF.push({},"0cc84LxcilKoKojAeYMkFzl","UIDefined",void 0),function(e){e[e.UILogin=0]="UILogin",e[e.UIGame=1]="UIGame"}(n||(n=e("UIID",{})));e("UICF",{[n.UILogin]:{prefab:"prefabs/LoginView"},[n.UIGame]:{prefab:"prefabs/GameView"}});i._RF.pop()}}}));

System.register("chunks:///_virtual/UILayer.ts",["cc","./UIBaseDefined.ts","./UIManager.ts"],(function(e){"use strict";var t,n,r,a,c;return{setters:[function(e){t=e.cclegacy,n=e.Component,r=e._decorator},function(e){a=e.UICF_BASE},function(e){c=e.UIManager}],execute:function(){var s;t._RF.push({},"b84921eUr1AQITH43HDbj/j","UILayer",void 0);const{ccclass:o,property:i}=r;e("UILayer",o("UILayer")(s=class extends n{addView(e){throw new Error("Method not implemented.")}onLoad(){c.getInstance().uiLayer=this,c.getInstance().init(a)}})||s);t._RF.pop()}}}));

System.register("chunks:///_virtual/UIManager.ts",["cc","./UIView.ts","./Singleton.ts","./Eventer.ts","./Events.ts","./UIMask.ts","./ResourceManager.ts","./UIAdapter.ts"],(function(e){"use strict";var i,t,n,s,u,o,l,a,r,h,c,d,g,p,I,f,C,k,v,U,w,S,m;return{setters:[function(e){i=e.cclegacy,t=e.Node,n=e.UITransform,s=e.view,u=e.BlockInputEvents,o=e.Tween,l=e.warn,a=e.Prefab,r=e.resources,h=e.director,c=e.isValid,d=e.find,g=e.tween,p=e.v3,I=e.instantiate},function(e){f=e.UIZIndex,C=e.UIView},function(e){k=e.Singleton},function(e){v=e.Eventer},function(e){U=e.Events},function(e){w=e.UIMask},function(e){S=e.default},function(e){m=e.default}],execute:function(){i._RF.push({},"d6954qvu3hDWb/AET111Mep","UIManager",void 0);class V extends(k()){constructor(...e){super(...e),this.bgCount=0,this.isClosing=!1,this.isOpening=!1,this.uiCache={},this.uiStack=[],this.uiOpenQueue=[],this.uiCloseQueue=[],this.uiConf={},this.aniCallback=null,this.uiLayer=null}init(e){this.uiConf=e,m.initResolution()}setUIConf(e){if(e)for(let i in e)this.uiConf[i]=e[i]}addPreventTouch(e){let i=new t;return i.name="preventTouch",i.addComponent(n).setContentSize(s.getVisibleSize()),i.addComponent(u),i.parent=e??this.uiLayer.node,i}removePreventTouch(e){let i=(e=e??this.uiLayer.node).getChildByName("preventTouch");i&&i.destroy()}autoExecNextUI(){if(this.uiCloseQueue.length>0){let e=this.uiCloseQueue[0];this.uiCloseQueue.splice(0,1),this.closeToUI(e)}if(this.uiOpenQueue.length>0){let e=this.uiOpenQueue[0];this.uiOpenQueue.splice(0,1),this.open(e.uiId,e.uiArgs)}}autoExecAnimation(e,i,t){let n=()=>{this.removePreventTouch(e.node),t()};e.bAni&&e.background?(o.stopAllByTarget(e.node),this.aniCallback&&this.aniCallback(),i?this.showView(e,n):e.bAni?(this.addPreventTouch(e.node),this.hideView(e,n)):t()):t()}autoLoadRes(e,i){i()}getOrCreateUI(e,i,t){let n=this.uiCache[e];if(n)return void i(n);let s=this.uiConf[e].prefab;if(null==s)return l(`getOrCreateUI ${e} fail, prefab conf not found!`),void i(null);let u=u=>{let o=I(u);return null==o?(l(`getOrCreateUI instantiate ${e} fail, path: ${s}`),void i(null)):(n=o.getComponent(C),null==n?(l(`getOrCreateUI getComponent ${e} fail, path: ${s}`),o.destroy(),void i(null)):void this.autoLoadRes(n,(()=>{n.init(t),i(n)})))},o=this.uiConf[e].bundle;o?S.getInstance().loadResAsync(s,a,o).then((e=>{u(e)})).catch((()=>{l(`load prefab : ${s} fail`),i(null)})):r.load(s,((t,n)=>{if(t)return l(`CreateUI loadRes ${e} fail, path: ${s} error: ${t}`),void i(null);u(n)}))}onUIOpen(e,i,t,n){if(null==i)return;t.uiView=i,i.node.active=!0,this.setSiblingIndex(i.node,t.zOrder||this.uiStack.length),i.uiId=e;let s=h.getScene().getChildByName("Canvas");c(this.uiLayer)&&(s=this.uiLayer.node),i.node.parent=s,v.getInstance().emit(U.UIOpenBefore,e),i.onOpen(n),this.addUIViewFunc(i),this.autoExecAnimation(i,!0,(()=>{this.aniCallback=null,c(i.node)&&(i.onOpenAniOver(),v.getInstance().emit(U.UIOpen,e))}))}addUIViewFunc(e){let i=d("background",e.node);i&&!e.background&&(e.background=i),e.quickClose&&e.background&&e.background.addComponent(u),this.addMask(e)}async open(e,i=null){let t={uiId:e,uiArgs:i,uiView:null};if(this.isOpening||this.isClosing)return void this.uiOpenQueue.push(t);let n=this.getUIIndex(e);if(-1!=n){let e=this.uiStack[n];return void(e&&e.uiView&&c(e.uiView.node)&&(e.uiView.node.parent=this.uiLayer.node,e.uiView.node.active=!0))}let s=this.getTopUI();return s&&s.node.active?t.zOrder=s.node.getSiblingIndex()+1:t.zOrder=this.uiStack.length+1,this.isOpening=!0,new Promise(((n,s)=>{this.getOrCreateUI(e,(u=>{if(t.isClose||null==u)return l(`getOrCreateUI ${e} fail! close state : ${t.isClose} , uiView : ${u}`),this.isOpening=!1,void(t.preventNode&&(t.preventNode.destroy(),t.preventNode=null));this.uiStack.push(t),this.onUIOpen(e,u,t,i),this.isOpening=!1,this.autoExecNextUI(),c(u)?n(u):s()}),i)}))}replace(e,i=null){this.close(this.uiStack[this.uiStack.length-1].uiView),this.open(e,i)}addMask(e){if(!e||!e.isMask||!e.node)return;let i=this.uiLayer.getComponentInChildren(w);i&&i.addMask(e)}removeMask(){if(!c(this.uiLayer))return;let e=this.uiLayer.getComponentInChildren(w);e&&e.removeMask()}close(e){let i;if(e){for(let t=this.uiStack.length-1;t>=0;t--){let n=this.uiStack[t];if(n.uiView===e){i=n,this.uiStack.splice(t,1);break}}if(void 0===i)return}else i=this.uiStack.pop();let t=i.uiId,n=i.uiView;i.isClose=!0,this.isClosing=!0,null!=n&&this.autoExecAnimation(n,!1,(()=>{this.isClosing=!1,this.aniCallback=null,n.onClose(),this.removeMask(),v.getInstance().emit(U.UIClose,t),c(n.node)&&(n.cache?(this.uiCache[t]=n,n.node.removeFromParent()):n.node.destroy()),this.autoExecNextUI()}))}closeAll(e){let i=i=>{if(!e)return!1;for(let t of e)if(i==t)return!0;return!1};for(var t=0;t<this.uiStack.length;t++){let e=this.uiStack[t];i(e.uiId)||(e.uiView.close(),t--)}this.uiOpenQueue=[],this.uiCloseQueue=[],this.isOpening=!1,this.isClosing=!1}closeToUI(e){let i=this.getUIIndex(e);if(-1==i)return;let t=this.uiStack[i];t&&this.close(t.uiView)}clearCache(){for(const e in this.uiCache){let i=this.uiCache[e];c(i.node)&&i.node.destroy()}this.uiCache={}}isTopUI(e){return 0!=this.uiStack.length&&this.uiStack[this.uiStack.length-1].uiId==e}getUI(e){for(let i=0;i<this.uiStack.length;i++){let t=this.uiStack[i];if(e==t.uiId)return t.uiView}return null}getTopUI(){for(let e=this.uiStack.length-1;e>=0;e--){let i=this.uiStack[e];if(i.uiView.node.getSiblingIndex()<f.notice)return i.uiView}return null}getUIIndex(e){for(let i=0;i<this.uiStack.length;i++){const t=this.uiStack[i];if(e==t.uiId)return c(t.uiView.node)?i:(this.uiStack.splice(i,1),-1)}return-1}checkMaskView(){for(let e=this.uiStack.length-1;e>=0;e--){let i=this.uiStack[e];if(i&&i.uiView&&c(i.uiView.node)&&i.uiView.node.active&&i.uiView.isMask)return i.uiView}return null}showView(e,i){(()=>{e.node&&this.playCommonPopUpAni(e.node,(()=>{i&&i()}))})(),this.aniCallback=i}hideView(e,i){e&&e.node&&(this.playCommonPopBackAni(e.node,(()=>{i&&i()})),this.aniCallback=i)}playCommonPopUpAni(e,i=null){g(e).stop();e.scale=p(.01,.01,1),g(e).to(.283,{scale:p(1.1,1.1,1)},{easing:"backOut"}).to(.134,{scale:p(.98,.98,1)}).to(.084,{scale:p(1,1,1)}).call((()=>{i&&i()})).start()}playCommonPopBackAni(e,i=null){g(e).stop(),g(e).to(.2,{scale:p(.01,.01,1)}).call((()=>{i&&i()})).start()}setSiblingIndex(e,i){e.setSiblingIndex(i),this.uiLayer.scheduleOnce((()=>{this.updateZIndex(this.uiLayer.node)}))}updateZIndex(e){let i=e.children.concat();i.sort(((e,i)=>(null==e.zIndex&&(e.zIndex=0),null==i.zIndex&&(i.zIndex=0),e.zIndex-i.zIndex)));let t=i.length;for(const e of i)e.setSiblingIndex(t)}}e("UIManager",V),i._RF.pop()}}}));

System.register("chunks:///_virtual/UIMask.ts",["cc","./UIManager.ts"],(function(e){"use strict";var t,n,s,i,o,a,d,c,r;return{setters:[function(e){t=e.cclegacy,n=e.Component,s=e.Node,i=e.UIOpacity,o=e.UITransform,a=e.view,d=e.isValid,c=e._decorator},function(e){r=e.UIManager}],execute:function(){var h;t._RF.push({},"1ec1a5TQxtBjbbiU7NgmgFr","UIMask",void 0);const{ccclass:l,menu:u}=c;e("UIMask",l(h=u("ui/common/UIMask")(h=class extends n{addTouch(e){var t;null!=(t=this.node)&&t.isValid&&e.quickClose&&(this.node.targetOff(s.EventType.TOUCH_START),this.node.on(s.EventType.TOUCH_START,(()=>{r.getInstance().close(e)}),this))}addMask(e){var t;null!=(t=this.node)&&t.isValid&&(this.node.getComponent(i).opacity=150,this.resetIndex(e),this.addTouch(e),this.node.getComponent(o).setContentSize(a.getVisibleSize()))}removeMask(){var e;let t=r.getInstance().checkMaskView();null!=(e=this.node)&&e.isValid&&(t&&d(t.node)&&t.node.active&&t.isMask?this.resetIndex(t):(this.node.getComponent(i).opacity=1,this.node.active=!1))}resetIndex(e){this.node.active=!0,this.node.zIndex=e.node.zIndex;let t=e.node.getSiblingIndex();this.node.setSiblingIndex(t),e.node.setSiblingIndex(t+1),this.addTouch(e)}})||h)||h);t._RF.pop()}}}));

System.register("chunks:///_virtual/UIUtils.ts",["cc"],(function(e){"use strict";var t,s,n,a,r;return{setters:[function(e){t=e.Node,s=e.UITransform,n=e.screen,a=e.BlockInputEvents,r=e.cclegacy}],execute:function(){r._RF.push({},"983e7apAEpJ65lVbSLQDGpJ","UIUtils",void 0);e("default",class{static addMaskLayer(e){let r=new t;r.name="mask",r.parent=e,r.addComponent(s).setContentSize(n.windowSize),r.addComponent(a)}static removeMaskLayer(e){if(!e)return;let t=e.getChildByName("mask");t&&t.destroy()}}),r._RF.pop()}}}));

System.register("chunks:///_virtual/UIView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIAdapter.ts","./UIManager.ts"],(function(e){"use strict";var i,t,n,o,r,a,s,c;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.initializerDefineProperty},function(e){n=e.cclegacy,o=e.Node,r=e._decorator,a=e.Component},function(e){s=e.default},function(e){c=e.UIManager}],execute:function(){var l,u,p,d,m,b,f,h,y,I,g,w,v;e("UIZIndex",void 0),n._RF.push({},"78e69fGqIJPHLsS6KtmjcjM","UIView",void 0);const{ccclass:U,property:x,menu:k}=r;let z;!function(e){e[e.views=1]="views",e[e.notice=999]="notice",e[e.message=1e3]="message",e[e.max=1001]="max"}(z||(z=e("UIZIndex",{})));e("UIView",(l=k("ui/common/UIView"),u=x({displayName:"开启动画"}),p=x({displayName:"快速关闭"}),d=x({displayName:"缓存选项"}),m=x({displayName:"是否添加遮罩"}),b=x({type:o,displayName:"界面背景图",tooltip:"界面背景图 用来设置快速关闭、及打开和关闭动画"}),U(f=l((y=i((h=class extends a{constructor(...e){super(...e),this.uiId=void 0,t(this,"bAni",y,this),t(this,"quickClose",I,this),t(this,"cache",g,this),t(this,"isMask",w,this),t(this,"background",v,this)}onLoad(){this.node.addComponent(s)}init(...e){}onOpen(...e){}onOpenAniOver(){}onClose(){}close(){c.getInstance().close(this)}setZIndex(e){this.node.zIndex=e}}).prototype,"bAni",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),I=i(h.prototype,"quickClose",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),g=i(h.prototype,"cache",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),w=i(h.prototype,"isMask",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),v=i(h.prototype,"background",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=h))||f)||f));n._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});